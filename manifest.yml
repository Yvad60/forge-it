modules:
  jira:issuePanel:
    - key: user-by-reference-group
      title: User reference by group
      icon: https://developer.atlassian.com/platform/forge/images/icons/issue-panel-icon.svg
      resource: trigger-resources
      resolver:
        function: app-resolver

  function:
    - key: app-resolver
      handler: index.handler

resources:
  - key: trigger-resources
    path: static/dist
    tunnel:
      port: 3000

permissions:
  content:
    styles:
      - unsafe-inline
  external:
    styles:
      - https://connect-cdn.atl-paas.net/surfaces.css
    fetch:
      backend:
        - "*.atlassian.net"
  scopes:
    - read:app-user-token
    - read:app-system-token
    - read:jira-user
    - storage:app

app:
  id: ari:cloud:ecosystem::app/597aae01-e322-4c97-a926-f18cd7124f3a
  storage:
    entities:
      - name: user
        attributes:
          emailAddress:
            type: string
          accountId:
            type: string
          apiKey:
            type: string
          siteurl:
            type: string
        indexes:
          - accountId
          - emailAddress
